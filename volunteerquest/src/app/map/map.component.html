<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<div *ngIf="user$ | async; let user; else anonymous">
  <!-- UI elements for when a volunteer or nonprofit is signed in. -->
  <mat-toolbar>
    <div id="menuContainer">
      <button id="menuButton" mat-icon-button [matMenuTriggerFor]="appMenu">
        <mat-icon>menu</mat-icon>
      </button>
    </div>
    <div id="titleContainer">
      <span id="title_text">Volunteer Quest</span>
    </div>
    <div id="filterContainer">
      <a routerLink="/filter">
        <button id="filterButton" mat-icon-button>
          <mat-icon>tune</mat-icon>
        </button>
      </a>
    </div>
    <div id="filterContainer">
      <button (click)="openFilterDialog()" id="filterButton" mat-icon-button>
        <mat-icon>tune</mat-icon>
      </button>
    </div>
  </mat-toolbar>
  <mat-menu #appMenu="matMenu" id="over" overlapTrigger="true">
    <button *ngIf="user.roles.nonprofit" (click)="openPostEventDialog()" mat-menu-item>
      <mat-icon>event</mat-icon>Post an event
    </button>
    <button *ngIf="user.roles.volunteer" mat-menu-item>
      <mat-icon>star</mat-icon>Favorites
    </button>
    <button mat-menu-item>
        <mat-icon>settings</mat-icon>Account
      </button>
    <button (click)="signOut()" mat-menu-item>
      <mat-icon>person</mat-icon>Sign Out
    </button>
  </mat-menu>
  <!-- this creates a google map on the page with the given lat/lng from -->
  <!-- the component as the initial center of the map: -->
  <!-- <agm-map [latitude]="lat" [longitude]="lng" [zoom]="zoom">
    <agm-marker *ngFor="let marker of markers | async, let i = index"
    (markerClick)="clickedMarker(marker.label, i)"
      [latitude]="marker.lat"
      [longitude]="marker.lng">
      <agm-info-window>
          <strong>{{marker.label}}</strong>
      </agm-info-window>
    </agm-marker>
  </agm-map> -->
  <agm-map [latitude]="lat" [longitude]="lng" [zoom]="zoom">
    <agm-marker *ngFor="let event of events$ | async, let i = index"
    (markerClick)="clickedMarker(event.content, i)"
      [latitude]="event.lat"
      [longitude]="event.lng">
      <agm-info-window>
          <strong>{{event.content}}</strong>
      </agm-info-window>
    </agm-marker>
  </agm-map>
</div>
<!-- UI elements for when a app user is not signed in.-->
<ng-template #anonymous>
  <mat-toolbar>
    <div id="menuContainer">
      <button id="menuButton" mat-icon-button [matMenuTriggerFor]="appMenu">
        <mat-icon>menu</mat-icon>
      </button>
    </div>
    <div id="titleContainer">
      <span id="title_text">Volunteer Quest</span>
    </div>
    <div id="filterContainer">
      <a routerLink="/filter">
        <button id="filterButton" mat-icon-button>
          <mat-icon>tune</mat-icon>
        </button>
      </a>
    </div>
    <div id="filterContainer">
      <button (click)="openFilterDialog()" id="filterButton" mat-icon-button>
        <mat-icon>tune</mat-icon>
      </button>
    </div>
  </mat-toolbar>
  <mat-menu #appMenu="matMenu" id="over" overlapTrigger="true">
    <button (click)="openSignInDialog()" *ngIf="!(authService.user | async)" mat-menu-item>
      <mat-icon>person</mat-icon>Sign In or Register
    </button>
  </mat-menu>
  <!-- this creates a google map on the page with the given lat/lng from -->
  <!-- the component as the initial center of the map: -->
  <agm-map [latitude]="lat" [longitude]="lng" [zoom]="zoom">
    <agm-marker *ngFor="let marker of markers | async, let i = index"
    (markerClick)="clickedMarker(marker.label, i)"
      [latitude]="marker.lat"
      [longitude]="marker.lng">
      <agm-info-window>
          <strong>{{marker.label}}</strong>
      </agm-info-window>
    </agm-marker>
  </agm-map>
</ng-template>
